// Basic interactivity: year, language, animations on scroll, carousel
(function(){
  // Year
  document.getElementById('year') && (document.getElementById('year').textContent = new Date().getFullYear());
  document.getElementById('year2') && (document.getElementById('year2').textContent = new Date().getFullYear());

  // Translations
  const i18n = {
    es: {
      'nav-home':'Inicio','nav-services':'Servicios','nav-portfolio':'Portfolio','nav-full':'Ver portfolio',
      'hero-title':'Diseñador Web, SEO & Content Strategist especializado en WordPress',
      'hero-sub':'Más de 8 años de experiencia en diseño web basado en WordPress. Amplia experiencia en el posicionamiento SEO técnico y estrategias de contenidos. He trabajado con empresas como Nomlogo, SeguroWP y Neoattack. Tengo conocimientos avanzados en CSS, PHP, HTML y creación de funciones personalizadas mediante JS.',
      'hero-cta-portfolio':'Ver portfolio','hero-cta-services':'Ver servicios',
      'services-title':'Servicios','services-sub':'Diseño UX/UI, desarrollo web en WordPress, auditorías SEO técnicas, estrategia de contenidos y creación de copy optimizado para buscadores.',
      'svc-web':'Diseño y desarrollo web (WordPress)','svc-web-desc':'Temas a medida, child-themes, optimización de Core Web Vitals y rendimiento. Entregables: HTML, CSS, JS y archivos del tema.',
      'svc-seo':'Posicionamiento SEO técnico','svc-seo-desc':'Auditorías, corrección de errores técnicos, optimización on-page y seguimiento con Search Console y Analytics. Planes orientados a resultados medibles.',
      'svc-content':'Estrategia y creación de contenido','svc-content-desc':'Mapas de contenido, clusterización por intención de búsqueda, redacción SEO y optimización de conversiones mediante pruebas A/B.',
      'mini-portfolio':'Portfolio','cta-more':'Ver portfolio completo','footer-cta':'Contacto','footer-email':'Escríbeme','footer-whatsapp':'WhatsApp',
      'nav-contact':'Contacto','pf-title':'Portfolio completo','pf-sub':'Proyectos seleccionados con descripción, tecnologías y resultados.','pf-case':'Ver case','contact-title':'Contacto','contact-sub':'¿Listo para trabajar? Contáctame por WhatsApp o correo.',
      // clients
      'clients-title':'Empresas con las que he trabajado',
      'clients-sub':'Proyectos y colaboraciones destacadas con clientes en diseño web, SEO y automatizaciones.',
      'neoattack-alt':'Logo Neoattack — cliente',
      'neoattack-aria':'Neoattack — sitio externo',
      'colorcopy-alt':'Logo Colorcopy Group — cliente',
      'colorcopy-aria':'Colorcopy Group — sitio externo',
      'ecoticias-alt':'Logo ECOticias — cliente',
      'ecoticias-aria':'ECOticias — sitio externo',
      //Support
      'support-title':'Soporte técnico',
'support-sub':'Atención rápida y profesional para mantener tu WordPress estable, integrado y seguro.',
'support-prob-title':'Problemas comunes en WordPress',
'support-prob-desc':'Errores frecuentes, conflictos de plugins o temas y soluciones rápidas para recuperar tu sitio.',
'support-prob-cta':'Ver problemas',
'support-prob-aria':'Ver problemas comunes en WordPress',
'support-prob-img-alt':'Icono problemas WordPress',
'support-int-title':'Integraciones',
'support-int-desc':'Conexiones con CRM, pasarelas de pago, plataformas de email y APIs a medida.',
'support-int-cta':'Ver integraciones',
'support-int-aria':'Ver integraciones disponibles',
'support-int-img-alt':'Icono integraciones',
'support-sec-title':'Problemas de seguridad y otros',
'support-sec-desc':'Hardening, backups, incidentes recientes y mitigación de vulnerabilidades.',
'support-sec-cta':'Ver seguridad',
'support-sec-aria':'Ver problemas de seguridad',
'support-sec-img-alt':'Icono seguridad',
      //Supoport-Problems
      // soporte - problemas
'sp-prob-meta-title':'Problemas comunes en WordPress — Soporte',
'sp-prob-meta-desc':'Lista de problemas frecuentes en WordPress y soluciones: rendimiento, seguridad, conflictos de plugins, backups y más.',
'sp-prob-title':'Problemas comunes en WordPress',
'sp-prob-sub':'Describo los problemas más frecuentes, su impacto y una estimación realista del tiempo de resolución. Si prefieres, solicito un diagnóstico rápido y te contacto.',
'sp-prob-hero-alt':'Soporte WordPress',
'sp-prob-list-title':'Problemas frecuentes',
'sp-prob-list-sub':'Cada ítem incluye causa habitual, impacto y tiempo estimado de resolución.',
'sp-prob-1-title':'Pantalla blanca (WSOD) / Error fatal',
'sp-prob-1-desc':'Causas: actualización de plugin/tema, error PHP o límite de memoria.',
'sp-prob-1-impact':'Alto',
'sp-prob-1-fix':'Solución típica: activar WP_DEBUG en staging, desactivar plugins por CLI/FTP, restaurar backup si es necesario.',
'sp-prob-1-time':'Tiempo estimado: 30–120 minutos.',
'sp-prob-2-title':'Rendimiento lento / Core Web Vitals bajos',
'sp-prob-2-desc':'Causas: imágenes sin optimizar, plugins pesados, hosting limitado, scripts bloqueantes.',
'sp-prob-2-fix':'Solución: optimizar imágenes, activar cache, usar CDN y auditar plugins.',
'sp-prob-2-time':'Tiempo estimado: 3–12 horas.',
'sp-prob-3-title':'Conflictos entre plugins y temas',
'sp-prob-3-desc':'Causas: APIs incompatibles, hooks mal empleados o versiones de PHP no compatibles.',
'sp-prob-3-fix':'Solución: debug incremental, revisar logs y aplicar fixes en child-theme.',
'sp-prob-3-time':'Tiempo estimado: 1–4 horas.',
'sp-prob-4-title':'Problemas tras actualizaciones',
'sp-prob-4-desc':'Causas: incompatibilidades o migraciones incompletas.',
'sp-prob-4-fix':'Solución: restaurar backup, test en staging y aplicar fixes.',
'sp-prob-4-time':'Tiempo estimado: 1–3 horas.',
'sp-prob-5-title':'Sitio comprometido / Malware',
'sp-prob-5-desc':'Causas: plugins vulnerables o credenciales filtradas.',
'sp-prob-5-fix':'Solución: aislamiento, limpieza manual + scanner, rotación de credenciales y hardening.',
'sp-prob-5-time':'Tiempo estimado: 4–40 horas.',
'sp-prob-6-title':'Problemas con pagos / checkout',
'sp-prob-6-desc':'Causas: configuración de pasarelas, SSL o webhooks.',
'sp-prob-6-fix':'Solución: revisar logs de gateway, probar sandbox y verificar endpoints.',
'sp-prob-6-time':'Tiempo estimado: 2–8 horas.',
'sp-prob-7-title':'Entregabilidad de emails',
'sp-prob-7-desc':'Causas: mala configuración SMTP o ausencia de SPF/DKIM.',
'sp-prob-7-fix':'Solución: configurar SMTP profesional y registros SPF/DKIM/DMARC.',
'sp-prob-7-time':'Tiempo estimado: 1–3 horas.',
'sp-prob-cta-title':'¿Necesitas soporte ahora?',
'sp-prob-cta-desc':'Solicita un diagnóstico rápido (revisión inicial de 30 minutos) y te propongo pasos concretos y presupuesto.',
'sp-prob-cta-email':'Escríbeme',
'sp-prob-cta-wa':'WhatsApp',
      //Support-Integrations
      // integraciones
'sp-int-title':'Integraciones comunes en WordPress',
'sp-int-sub':'Conecto tu WordPress con herramientas críticas: CRM, pagos, email, analytics, chatbots, reservas y ERPs.',
'sp-int-hero-alt':'Integraciones WordPress',
'sp-int-list-title':'Integraciones frecuentes',
'sp-int-list-sub':'Descripción, casos de uso y estimación de tiempo para cada integración.',
'sp-int-1-title':'CRM — HubSpot / Salesforce',
'sp-int-1-desc':'Sincronización de contactos, envíos de formularios y pipelines. Ideal para automatizar ventas y seguimiento.',
'sp-int-1-case':'Caso típico: envíos de formularios → contacto en CRM + tag por fuente.',
'sp-int-1-time':'Tiempo estimado: 2–8 horas.',
'sp-int-2-title':'Pasarelas de pago — Stripe / PayPal / MercadoPago',
'sp-int-2-desc':'Configuración de checkout, webhooks y pruebas en sandbox para asegurar pagos y notificaciones.',
'sp-int-2-case':'Caso típico: pagos → generación de pedido → webhook para actualización de estado.',
'sp-int-2-time':'Tiempo estimado: 2–6 horas.',
'sp-int-3-title':'Email transaccional — SendGrid / Mailgun',
'sp-int-3-desc':'Entrega confiable de correos (SPF/DKIM), templates y logging de eventos.',
'sp-int-3-case':'Caso típico: emails de orden + recuperación de contraseña con registro de entregabilidad.',
'sp-int-3-time':'Tiempo estimado: 1–3 horas.',
'sp-int-4-title':'Analytics & Tag Manager — GA4 / GTM',
'sp-int-4-desc':'Medición avanzada, ecommerce events y configuración de GTM para eventos personalizados.',
'sp-int-4-case':'Caso típico: trackear add_to_cart, purchase, lead y funnels.',
'sp-int-4-time':'Tiempo estimado: 2–8 horas.',
'sp-int-5-title':'Chatbots — Bot Conversa / ManyChat',
'sp-int-5-desc':'Integración vía widget o API para captura de leads, envío a CRM y automatización.',
'sp-int-5-case':'Caso típico: captura en bot → envío a HubSpot + notificación interna.',
'sp-int-5-time':'Tiempo estimado: 2–6 horas.',
'sp-int-6-title':'Reservas / Marketplaces — Hostaway / Dokan',
'sp-int-6-desc':'Integraciones vía API para motores de reserva, sincronización de inventario y flujos multivendedor.',
'sp-int-6-case':'Caso típico: sincronizar disponibilidad y recibir reservas en CMS/ERP.',
'sp-int-6-time':'Tiempo estimado: 4–16 horas.',
'sp-int-7-title':'ERP / Sincronización de inventario',
'sp-int-7-desc':'Conexión con ERPs y sincronización bidireccional para stock, pedidos y facturación.',
'sp-int-7-case':'Caso típico: sincronizar stock y estados de pedido entre WooCommerce y ERP.',
'sp-int-7-time':'Tiempo estimado: 8–40 horas.',
'sp-int-cta-title':'¿Necesitas ayuda con una integración?',
'sp-int-cta-desc':'Solicita una evaluación rápida y te propongo la mejor arquitectura y presupuesto estimado.',
'sp-int-cta-email':'Escríbeme',
'sp-int-cta-wa':'WhatsApp',
      //Support-Security
      // seguridad
'ss-title':'Problemas de seguridad y vulnerabilidades',
'ss-sub':'Descripción de incidentes recientes, señales de compromiso y pasos prácticos para mitigar y recuperar un sitio WordPress.',
'ss-list-title':'Temas y casos relevantes',
'ss-list-sub':'Vectores y ataques que han tenido impacto recientemente y cómo abordarlos.',
'ss-1-title':'Backdoors JavaScript y reinfecciones',
'ss-1-desc':'Campañas que inyectan JavaScript malicioso y backdoors persistentes que reescriben archivos y reinfectan tras limpiezas parciales.',
'ss-1-evidence':'Indicador: scripts externos desconocidos, cambios en archivos .js o mu-plugins y redirecciones inesperadas.',
'ss-1-mitigation':'Mitigación: escaneo profundo, revisar mu-plugins, comparar hashes, restaurar desde backup limpio y rotar credenciales.',
'ss-1-time':'Tiempo estimado: 4–40 horas.',
'ss-2-title':'Abuso del directorio mu-plugins',
'ss-2-desc':'Atacantes usan mu-plugins para ocultar código malicioso que se autoejecuta.',
'ss-2-evidence':'Indicador: archivos PHP nuevos con timestamps recientes en wp-content/mu-plugins.',
'ss-2-mitigation':'Mitigación: auditar mu-plugins, remover archivos no autorizados y aplicar WAF.',
'ss-3-title':'Vulnerabilidades críticas en plugins (CVE)',
'ss-3-desc':'Plugins sin parches permiten inyección de backdoors o ejecución remota.',
'ss-3-evidence':'Indicador: versiones antiguas de plugins con avisos públicos o CVE.',
'ss-3-mitigation':'Mitigación: actualizar, suscribirse a alertas y test en staging.',
'ss-4-title':'Redirecciones maliciosas por puerta trasera',
'ss-4-desc':'Código inyectado que actúa como puerta trasera y dispara redirecciones selectivas; a menudo se camufla como funcionalidad legítima.',
'ss-4-evidence':'Indicadores: redirecciones intermitentes, scripts de dominios no reconocidos o entradas extrañas en DB.',
'ss-4-mitigation':'Mitigación: revisar archivos y DB, eliminar puertas traseras, restaurar backup y activar reglas WAF.',
'ss-4-time':'Tiempo estimado: 4–24 horas.',
'ss-5-title':'Abuso de XML-RPC / Pingback',
'ss-5-desc':'XML-RPC/pingback puede ser abusado para DDoS, reflectores o exfiltración si está expuesto.',
'ss-5-evidence':'Indicador: tráfico inusual a /xmlrpc.php o picos de peticiones.',
'ss-5-mitigation':'Mitigación: deshabilitar XML-RPC si no se usa, limitar accesos y aplicar WAF.',
'ss-6-title':'Credenciales comprometidas y admins fantasma',
'ss-6-desc':'Contraseñas débiles o filtradas permiten la creación de administradores no autorizados.',
'ss-6-evidence':'Indicador: usuarios admin desconocidos o sesiones desde IPs extrañas.',
'ss-6-mitigation':'Mitigación: eliminar usuarios no autorizados, rotar contraseñas y activar 2FA.',
'ss-7-title':'Supply chain: plugins descontinuados/abandonados',
'ss-7-desc':'Plugins sin mantenimiento aumentan la superficie de ataque.',
'ss-7-evidence':'Indicador: plugins sin actualizaciones por meses o dependencias con CVE.',
'ss-7-mitigation':'Mitigación: auditar, reemplazar por alternativas activas y reducir plugins activos.',
'ss-cta-title':'¿Necesitas un análisis de seguridad?',
'ss-cta-desc':'Ofrezco diagnóstico, limpieza de infecciones, hardening y planes de monitoreo. Diagnóstico inicial de 30 minutos.',
'ss-cta-email':'Escríbeme',
'ss-cta-wa':'WhatsApp',
      //SEO-Audit
      // Español
'seo-title':'Posicionamiento SEO profesional',
'seo-sub':'Optimizo tu WordPress para aumentar visibilidad orgánica, mejorar Core Web Vitals y convertir tráfico en clientes.',
'seo-feat-1':'SEO técnico (estructura, velocidad y Core Web Vitals)',
'seo-feat-2':'Estrategia de contenidos y keywords',
'seo-feat-3':'Auditoría de backlinks y optimización on-page',
'seo-btn-service':'Ver servicio',
'seo-btn-quick':'Chequeo SEO rápido',
      //Portfolio
   'pf-seo-content-title': 'Contenidos SEO para blog — Club de Inversores',
'pf-seo-content-desc': 'Planificación editorial, clusterización por intención y optimización on-page para escalar tráfico orgánico.',
'pf-seo-content-feat-1': 'Estrategia de palabras clave y mapeo de temas',
'pf-seo-content-feat-2': 'Calendario editorial y briefs para redactores',
'pf-seo-content-feat-3': 'Optimización on-page y rich snippets',
'pf-seo-content-results': 'Resultados: + de 200 clicks/día en 6 meses (datos aportados por el autor).',
'pf-seo-tech-title': 'SEO técnico — Nomlogo',
'pf-seo-tech-desc': 'Auditorías técnicas, mejoras de indexación, optimización de Core Web Vitals y corrección de errores en WordPress.',
'pf-seo-tech-feat-1': 'Auditoría de rastreabilidad y estructura de URLs',
'pf-seo-tech-feat-2': 'Optimización de carga crítica (CSS/JS) y assets',
'pf-seo-tech-feat-3': 'Implementación de schema y metadatos',
'pf-web-design-title': 'Diseño web & conversión — Villas Zamná',
'pf-web-design-desc': 'Diseño orientado a reservas: integración con Hostaway, motor de reservas inyectado y experiencia multilenguaje.',
'pf-web-design-feat-1': 'Integración Hostaway vía API y motor de reservas',
'pf-web-design-feat-2': 'Child-theme Divi con CSS optimizado',
'pf-web-design-feat-3': 'Popup personalizado y mejoras UX para aumentar conversiones',
'pf-cta-ver-case': 'Ver case',
'pf-cta-download-case': 'Descargar case (PDF)',
'pf-cta-request-demo': 'Solicitar demo',
'pf-cta-contact': 'Solicitar presupuesto',
    },
    en: {
      'nav-home':'Home','nav-services':'Services','nav-portfolio':'Portfolio','nav-full':'See portfolio',
      'hero-title':'Web Designer, SEO & Content Strategist specialized in WordPress',
      'hero-sub':'Over 8 years of experience building WordPress-based websites. Technical SEO and content strategy expertise. Worked with Nomlogo, SeguroWP and Neoattack. Advanced skills in CSS, PHP, HTML and JS custom functions.',
      'hero-cta-portfolio':'See portfolio','hero-cta-services':'See services',
      'services-title':'Services','services-sub':'UX/UI design, WordPress development, technical SEO audits, content strategy and SEO copywriting.',
      'svc-web':'Web design & development (WordPress)','svc-web-desc':'Custom themes, child-themes, Core Web Vitals optimization and performance. Deliverables: HTML, CSS, JS and theme files.',
      'svc-seo':'Technical SEO','svc-seo-desc':'Audits, fixing technical issues, on-page optimization and tracking with Search Console & Analytics. Results-focused plans.',
      'svc-content':'Content strategy & creation','svc-content-desc':'Content maps, intent-driven clusters, SEO writing and conversion optimization via A/B testing.',
      'mini-portfolio':'Portfolio','cta-more':'See full portfolio','footer-cta':'Contact','footer-email':'Email me','footer-whatsapp':'WhatsApp',
      'nav-contact':'Contact','pf-title':'Full portfolio','pf-sub':'Selected projects with description, tech and results.','pf-case':'View case','contact-title':'Contact','contact-sub':'Ready to work? Contact me via WhatsApp or email.',
      // clients
      'clients-title':'Companies I\'ve worked with',
      'clients-sub':'Selected projects and collaborations in web design, SEO and automations.',
      'neoattack-alt':'Neoattack logo — client',
      'neoattack-aria':'Neoattack — external site',
      'colorcopy-alt':'Colorcopy Group logo — client',
      'colorcopy-aria':'Colorcopy Group — external site',
      'ecoticias-alt':'ECOticias logo — client',
      'ecoticias-aria':'ECOticias — external site',
      //Support
  'support-title':'Technical support',
'support-sub':'Fast, professional support to keep your WordPress stable, integrated and secure.',
'support-prob-title':'Common WordPress issues',
'support-prob-desc':'Frequent errors, plugin/theme conflicts and quick fixes to restore your site.',
'support-prob-cta':'See issues',
'support-prob-aria':'See common WordPress issues',
'support-prob-img-alt':'Icon common issues',
'support-int-title':'Integrations',
'support-int-desc':'Connections with CRMs, payment gateways, email platforms and custom APIs.',
'support-int-cta':'See integrations',
'support-int-aria':'See common integrations',
'support-int-img-alt':'Icon integrations',
'support-sec-title':'Security issues & more',
'support-sec-desc':'Hardening, backups, recent incidents and vulnerability mitigation.',
'support-sec-cta':'See security',
'support-sec-aria':'See security issues',
'support-sec-img-alt':'Icon security',
        //Support-Problems
        'sp-prob-meta-title':'Common WordPress issues — Support',
'sp-prob-meta-desc':'List of frequent WordPress issues and solutions: performance, security, plugin conflicts, backups and more.',
'sp-prob-title':'Common WordPress issues',
'sp-prob-sub':'I describe the most frequent issues, their impact and a realistic estimate of resolution time. If you prefer, request a quick diagnosis and I will contact you.',
'sp-prob-hero-alt':'WordPress support',
'sp-prob-list-title':'Frequent issues',
'sp-prob-list-sub':'Each item includes typical cause, impact and estimated resolution time.',
'sp-prob-1-title':'White screen (WSOD) / Fatal error',
'sp-prob-1-desc':'Causes: plugin/theme update, PHP error or memory limit.',
'sp-prob-1-impact':'High',
'sp-prob-1-fix':'Typical fix: enable WP_DEBUG in staging, disable plugins via CLI/FTP, restore backup if needed.',
'sp-prob-1-time':'Estimated time: 30–120 minutes.',
'sp-prob-2-title':'Slow performance / Low Core Web Vitals',
'sp-prob-2-desc':'Causes: unoptimized images, heavy plugins, limited hosting, render-blocking scripts.',
'sp-prob-2-fix':'Fix: optimize images, enable caching, use CDN and audit plugins.',
'sp-prob-2-time':'Estimated time: 3–12 hours.',
'sp-prob-3-title':'Plugin & theme conflicts',
'sp-prob-3-desc':'Causes: incompatible APIs, misused hooks or unsupported PHP versions.',
'sp-prob-3-fix':'Fix: incremental debugging, check logs and apply fixes in a child theme.',
'sp-prob-3-time':'Estimated time: 1–4 hours.',
'sp-prob-4-title':'Issues after updates',
'sp-prob-4-desc':'Causes: incompatibilities or incomplete migrations.',
'sp-prob-4-fix':'Fix: restore from backup, test in staging and apply compatible fixes.',
'sp-prob-4-time':'Estimated time: 1–3 hours.',
'sp-prob-5-title':'Compromised site / Malware',
'sp-prob-5-desc':'Causes: vulnerable plugins or leaked credentials.',
'sp-prob-5-fix':'Fix: isolate, clean (scanner + manual), rotate credentials and harden security.',
'sp-prob-5-time':'Estimated time: 4–40 hours.',
'sp-prob-6-title':'Payment / checkout issues',
'sp-prob-6-desc':'Causes: gateway settings, SSL or webhook configuration.',
'sp-prob-6-fix':'Fix: review gateway logs, test in sandbox and verify endpoints.',
'sp-prob-6-time':'Estimated time: 2–8 hours.',
'sp-prob-7-title':'Email deliverability',
'sp-prob-7-desc':'Causes: bad SMTP setup or missing SPF/DKIM.',
'sp-prob-7-fix':'Fix: configure professional SMTP and DNS records (SPF/DKIM/DMARC).',
'sp-prob-7-time':'Estimated time: 1–3 hours.',
'sp-prob-cta-title':'Need support now?',
'sp-prob-cta-desc':'Request a quick diagnosis (30-minute initial review) and I will propose concrete steps and a quote.',
'sp-prob-cta-email':'Email me',
'sp-prob-cta-wa':'WhatsApp',
        //Support-Integrations
        'sp-int-title':'Common integrations for WordPress',
'sp-int-sub':'I connect your WordPress to critical tools: CRM, payments, email, analytics, chatbots, bookings and ERPs.',
'sp-int-hero-alt':'WordPress integrations',
'sp-int-list-title':'Frequent integrations',
'sp-int-list-sub':'Description, use cases and time estimates for each integration.',
'sp-int-1-title':'CRM — HubSpot / Salesforce',
'sp-int-1-desc':'Sync contacts, form submissions and pipelines. Great to automate sales and follow-up.',
'sp-int-1-case':'Typical case: form submits → contact in CRM + source tag.',
'sp-int-1-time':'Estimated time: 2–8 hours.',
'sp-int-2-title':'Payment gateways — Stripe / PayPal / MercadoPago',
'sp-int-2-desc':'Checkout setup, webhooks and sandbox testing to ensure payments and notifications.',
'sp-int-2-case':'Typical case: payments → order creation → webhook updates.',
'sp-int-2-time':'Estimated time: 2–6 hours.',
'sp-int-3-title':'Transactional email — SendGrid / Mailgun',
'sp-int-3-desc':'Reliable email delivery (SPF/DKIM), templates and event logging.',
'sp-int-3-case':'Typical case: order emails + password recovery with deliverability tracking.',
'sp-int-3-time':'Estimated time: 1–3 hours.',
'sp-int-4-title':'Analytics & Tag Manager — GA4 / GTM',
'sp-int-4-desc':'Advanced measurement, ecommerce events and GTM for custom events.',
'sp-int-4-case':'Typical case: track add_to_cart, purchase, lead and funnels.',
'sp-int-4-time':'Estimated time: 2–8 hours.',
'sp-int-5-title':'Chatbots — Bot Conversa / ManyChat',
'sp-int-5-desc':'Widget or API integration for lead capture and CRM forwarding.',
'sp-int-5-case':'Typical case: bot capture → send to HubSpot + internal alert.',
'sp-int-5-time':'Estimated time: 2–6 hours.',
'sp-int-6-title':'Bookings / Marketplaces — Hostaway / Dokan',
'sp-int-6-desc':'API integrations for booking engines, inventory sync and multivendor flows.',
'sp-int-6-case':'Typical case: sync availability and receive bookings in CMS/ERP.',
'sp-int-6-time':'Estimated time: 4–16 hours.',
'sp-int-7-title':'ERP / Inventory sync',
'sp-int-7-desc':'Connect to ERPs and sync stock, orders and invoicing bidirectionally.',
'sp-int-7-case':'Typical case: sync stock and order states between WooCommerce and ERP.',
'sp-int-7-time':'Estimated time: 8–40 hours.',
'sp-int-cta-title':'Need help with an integration?',
'sp-int-cta-desc':'Request a quick evaluation and I will propose the best architecture and an estimate.',
'sp-int-cta-email':'Email me',
'sp-int-cta-wa':'WhatsApp',
        //Support-Security
        'ss-title':'Security issues and vulnerabilities',
'ss-sub':'Description of recent incidents, compromise indicators and practical steps to mitigate and recover a WordPress site.',
'ss-list-title':'Relevant topics & cases',
'ss-list-sub':'Vectors and attacks that had recent impact and how to address them.',
'ss-1-title':'JavaScript backdoors & reinfectors',
'ss-1-desc':'Campaigns injecting malicious JavaScript and persistent backdoors that rewrite files and reinfect after partial cleanups.',
'ss-1-evidence':'Indicator: unknown external scripts, modified .js files or mu-plugins and unexpected redirects.',
'ss-1-mitigation':'Mitigation: deep scan (Sucuri/Wordfence), audit mu-plugins, compare hashes, restore clean backup and rotate credentials.',
'ss-1-time':'Estimated recovery: 4–40 hours.',
'ss-2-title':'Abuse of mu-plugins directory',
'ss-2-desc':'Attackers hide malicious code in mu-plugins (auto-executing, less visible).',
'ss-2-evidence':'Indicator: new PHP files with recent timestamps in wp-content/mu-plugins.',
'ss-2-mitigation':'Mitigation: audit mu-plugins, remove unauthorized files, enable WAF.',
'ss-3-title':'Critical plugin vulnerabilities (CVE)',
'ss-3-desc':'Unpatched plugins enable backdoor injection or remote code execution.',
'ss-3-evidence':'Indicator: outdated plugin versions with public advisories/CVEs.',
'ss-3-mitigation':'Mitigation: update, subscribe to security feeds and test in staging.',
'ss-4-title':'Malicious redirects via backdoor',
'ss-4-desc':'Injected code acting as a backdoor triggers selective redirects; it can be disguised as legit functionality (e.g. link notifications).',
'ss-4-evidence':'Indicators: intermittent redirects, unknown script domains, DB entries containing iframes or redirects.',
'ss-4-mitigation':'Mitigation: scan files/DB, remove backdoors, restore clean backups and add WAF rules.',
'ss-4-time':'Estimated time: 4–24 hours.',
'ss-5-title':'XML-RPC / Pingback abuse',
'ss-5-desc':'XML-RPC/pingback abuse can be used for DDoS/reflection or limited data exfiltration if exposed.',
'ss-5-evidence':'Indicator: unusual traffic to /xmlrpc.php or request spikes.',
'ss-5-mitigation':'Mitigation: disable XML-RPC if unused, rate-limit and use WAF.',
'ss-6-title':'Compromised credentials & ghost admins',
'ss-6-desc':'Weak or leaked passwords let attackers create unauthorized admin users.',
'ss-6-evidence':'Indicator: unknown admin users or sessions from odd IPs.',
'ss-6-mitigation':'Mitigation: remove unauthorized users, force password rotation and enable 2FA.',
'ss-7-title':'Supply chain: abandoned plugins/themes',
'ss-7-desc':'Unmaintained plugins increase attack surface and risk.',
'ss-7-evidence':'Indicator: plugins with no updates in months or deps with CVEs.',
'ss-7-mitigation':'Mitigation: audit, replace or remove and minimize active plugins.',
'ss-cta-title':'Need a security review?',
'ss-cta-desc':'I provide diagnostics, cleanup, hardening and monitoring plans. Initial 30-minute review available.',
'ss-cta-email':'Email me',
'ss-cta-wa':'WhatsApp',
        //SEO-Audit
        'seo-title':'Professional SEO & positioning',
'seo-sub':'I optimize WordPress to increase organic visibility, improve Core Web Vitals and convert traffic to customers.',
'seo-feat-1':'Technical SEO (structure, speed & Core Web Vitals)',
'seo-feat-2':'Content strategy and keywords',
'seo-feat-3':'Backlink audit & on-page optimization',
'seo-btn-service':'See service',
'seo-btn-quick':'Quick SEO check',
        //Portfolio
        'pf-seo-content-title':'SEO content for blog — Club de Inversores',
'pf-seo-content-title': 'SEO Content for Blog — Club de Inversores',
'pf-seo-content-desc': 'Editorial planning, intent clustering and on-page optimization to scale organic traffic.',
'pf-seo-content-feat-1': 'Keyword strategy and topic mapping',
'pf-seo-content-feat-2': 'Editorial calendar and briefs for writers',
'pf-seo-content-feat-3': 'On-page optimization and rich snippets',
'pf-seo-content-results': 'Results: +200 clicks/day in 6 months (data provided by author).',
'pf-seo-tech-title': 'Technical SEO — Nomlogo',
'pf-seo-tech-desc': 'Technical audits, indexing improvements, Core Web Vitals optimisation and WordPress fixes.',
'pf-seo-tech-feat-1': 'Crawlability and URL structure audit',
'pf-seo-tech-feat-2': 'Critical CSS/JS and asset optimisation',
'pf-seo-tech-feat-3': 'Schema and metadata implementation',
'pf-web-design-title': 'Web Design & Conversions — Villas Zamná',
'pf-web-design-desc': 'Reservation-focused design: Hostaway integration, injected booking engine and multilingual UX.',
'pf-web-design-feat-1': 'Hostaway API integration and booking engine',
'pf-web-design-feat-2': 'Divi child-theme with optimized CSS',
'pf-web-design-feat-3': 'Custom popup and UX improvements to increase bookings',
'pf-cta-ver-case': 'View case',
'pf-cta-download-case': 'Download case (PDF)',
'pf-cta-request-demo': 'Request demo',
'pf-cta-contact': 'Request quote',
    },
    pt: {
      'nav-home':'Início','nav-services':'Serviços','nav-portfolio':'Portfólio','nav-full':'Ver portfólio',
      'hero-title':'Designer Web, SEO & Content Strategist especializado em WordPress',
      'hero-sub':'Mais de 8 anos de experiência em design web baseado em WordPress. Experiência em SEO técnico e estratégias de conteúdo. Trabalhei com Nomlogo, SeguroWP e Neoattack. Conhecimentos avançados em CSS, PHP, HTML e funções JS personalizadas.',
      'hero-cta-portfolio':'Ver portfólio','hero-cta-services':'Ver serviços',
      'services-title':'Serviços','services-sub':'Design UX/UI, desenvolvimento WordPress, auditorias SEO técnicas, estratégia de conteúdo e copywriting SEO.',
      'svc-web':'Design e desenvolvimento web (WordPress)','svc-web-desc':'Temas personalizados, child-themes, otimização de Core Web Vitals e desempenho. Entregáveis: HTML, CSS, JS e arquivos do tema.',
      'svc-seo':'SEO técnico','svc-seo-desc':'Auditorias, correção de problemas técnicos, otimização on-page e acompanhamento com Search Console e Analytics.',
      'svc-content':'Estratégia e criação de conteúdo','svc-content-desc':'Mapas de conteúdo, clusterização por intenção, redação SEO e otimização de conversões via testes A/B.',
      'mini-portfolio':'Portfólio','cta-more':'Ver portfólio completo','footer-cta':'Contato','footer-email':'Escreva-me','footer-whatsapp':'WhatsApp',
      'nav-contact':'Contato','pf-title':'Portfólio completo','pf-sub':'Projetos selecionados con descrição, tecnologias e resultados.','pf-case':'Ver case','contact-title':'Contato','contact-sub':'Pronto para trabalhar? Contate-me por WhatsApp ou email.',
      // clients
      'clients-title':'Empresas com as quais trabalhei',
      'clients-sub':'Projetos e colaborações selecionadas em design web, SEO e automações.',
      'neoattack-alt':'Logo Neoattack — cliente',
      'neoattack-aria':'Neoattack — site externo',
      'colorcopy-alt':'Logo Colorcopy Group — cliente',
      'colorcopy-aria':'Colorcopy Group — site externo',
      'ecoticias-alt':'Logo ECOticias — cliente',
      'ecoticias-aria':'ECOticias — site externo',
      'support-title':'Suporte técnico',
      //Support
'support-sub':'Atendimento rápido e profissional para manter seu WordPress estável, integrado e seguro.',
'support-prob-title':'Problemas comuns no WordPress',
'support-prob-desc':'Erros frequentes, conflitos de plugins ou temas e soluções rápidas para recuperar o site.',
'support-prob-cta':'Ver problemas',
'support-prob-aria':'Ver problemas comuns no WordPress',
'support-prob-img-alt':'Ícone problemas WordPress',
'support-int-title':'Integrações',
'support-int-desc':'Conexões com CRM, gateways de pagamento, plataformas de e-mail e APIs sob medida.',
'support-int-cta':'Ver integrações',
'support-int-aria':'Ver integrações comuns',
'support-int-img-alt':'Ícone integrações',
'support-sec-title':'Problemas de segurança e outros',
'support-sec-desc':'Hardening, backups, incidentes recentes e mitigação de vulnerabilidades.',
'support-sec-cta':'Ver segurança',
'support-sec-aria':'Ver problemas de segurança',
'support-sec-img-alt':'Ícone segurança',
        //Support-Problems
        'sp-prob-meta-title':'Problemas comuns no WordPress — Suporte',
'sp-prob-meta-desc':'Lista de problemas frequentes em WordPress e soluções: performance, segurança, conflitos de plugins, backups e mais.',
'sp-prob-title':'Problemas comuns no WordPress',
'sp-prob-sub':'Descrevo os problemas mais frequentes, seu impacto e uma estimativa realista do tempo de resolução. Se preferir, solicite um diagnóstico rápido e eu entro em contato.',
'sp-prob-hero-alt':'Suporte WordPress',
'sp-prob-list-title':'Problemas frequentes',
'sp-prob-list-sub':'Cada item inclui causa típica, impacto e tempo estimado de resolução.',
'sp-prob-1-title':'Tela branca (WSOD) / Erro fatal',
'sp-prob-1-desc':'Causas: atualização de plugin/tema, erro PHP ou limite de memória.',
'sp-prob-1-impact':'Alto',
'sp-prob-1-fix':'Solução típica: ativar WP_DEBUG em staging, desativar plugins via CLI/FTP e restaurar backup se necessário.',
'sp-prob-1-time':'Tempo estimado: 30–120 minutos.',
'sp-prob-2-title':'Desempenho lento / Core Web Vitals baixos',
'sp-prob-2-desc':'Causas: imagens não otimizadas, plugins pesados, hospedagem limitada ou scripts bloqueantes.',
'sp-prob-2-fix':'Solução: otimizar imagens, ativar cache, usar CDN e auditar plugins.',
'sp-prob-2-time':'Tempo estimado: 3–12 horas.',
'sp-prob-3-title':'Conflitos entre plugins e temas',
'sp-prob-3-desc':'Causas: APIs incompatíveis, hooks mal utilizados ou versões de PHP não compatíveis.',
'sp-prob-3-fix':'Solução: debug incremental, checar logs e aplicar correções no child-theme.',
'sp-prob-3-time':'Tempo estimado: 1–4 horas.',
'sp-prob-4-title':'Problemas após atualizações',
'sp-prob-4-desc':'Causas: incompatibilidades ou migrações incompletas.',
'sp-prob-4-fix':'Solução: restaurar backup, testar em staging e aplicar correções compatíveis.',
'sp-prob-4-time':'Tempo estimado: 1–3 horas.',
'sp-prob-5-title':'Site comprometido / Malware',
'sp-prob-5-desc':'Causas: plugins vulneráveis ou credenciais vazadas.',
'sp-prob-5-fix':'Solução: isolar, limpar (scanner + manual), rotacionar credenciais e aplicar hardening.',
'sp-prob-5-time':'Tempo estimado: 4–40 horas.',
'sp-prob-6-title':'Problemas com pagamentos / checkout',
'sp-prob-6-desc':'Causas: configuração de gateway, SSL ou webhooks.',
'sp-prob-6-fix':'Solução: revisar logs do gateway, testar em sandbox e verificar endpoints.',
'sp-prob-6-time':'Tempo estimado: 2–8 horas.',
'sp-prob-7-title':'Entregabilidade de e-mails',
'sp-prob-7-desc':'Causas: má configuração SMTP ou ausência de SPF/DKIM.',
'sp-prob-7-fix':'Solução: configurar SMTP profissional e registros DNS (SPF/DKIM/DMARC).',
'sp-prob-7-time':'Tempo estimado: 1–3 horas.',
'sp-prob-cta-title':'Precisa de suporte agora?',
'sp-prob-cta-desc':'Solicite um diagnóstico rápido (revisão inicial de 30 minutos) e eu proponho passos concretos e orçamento.',
'sp-prob-cta-email':'Escreva-me',
'sp-prob-cta-wa':'WhatsApp',
        //Support-Integrations
        'sp-int-title':'Integrações comuns no WordPress',
'sp-int-sub':'Conecto seu WordPress com ferramentas críticas: CRM, pagamentos, email, analytics, chatbots, reservas e ERPs.',
'sp-int-hero-alt':'Integrações WordPress',
'sp-int-list-title':'Integrações frequentes',
'sp-int-list-sub':'Descrição, casos de uso e estimativa de tempo para cada integração.',
'sp-int-1-title':'CRM — HubSpot / Salesforce',
'sp-int-1-desc':'Sincronização de contatos, envios de formulários e pipelines. Ideal para automatizar vendas e follow-up.',
'sp-int-1-case':'Caso típico: envios de formulário → contato no CRM + tag de origem.',
'sp-int-1-time':'Tempo estimado: 2–8 horas.',
'sp-int-2-title':'Gateways de pagamento — Stripe / PayPal / MercadoPago',
'sp-int-2-desc':'Configuração de checkout, webhooks e testes em sandbox para garantir pagamentos e notificações.',
'sp-int-2-case':'Caso típico: pagamentos → criação de pedido → webhook para atualização de status.',
'sp-int-2-time':'Tempo estimado: 2–6 horas.',
'sp-int-3-title':'Email transacional — SendGrid / Mailgun',
'sp-int-3-desc':'Entrega confiável de emails (SPF/DKIM), templates e logging de eventos.',
'sp-int-3-case':'Caso típico: emails de pedido + recuperação de senha com registro de entregabilidade.',
'sp-int-3-time':'Tempo estimado: 1–3 horas.',
'sp-int-4-title':'Analytics & Tag Manager — GA4 / GTM',
'sp-int-4-desc':'Medição avançada, ecommerce events e configuração de GTM para eventos personalizados.',
'sp-int-4-case':'Caso típico: trackear add_to_cart, purchase, lead e funnels.',
'sp-int-4-time':'Tempo estimado: 2–8 horas.',
'sp-int-5-title':'Chatbots — Bot Conversa / ManyChat',
'sp-int-5-desc':'Integração via widget ou API para captura de leads e envio para CRM.',
'sp-int-5-case':'Caso típico: captura no bot → envio ao HubSpot + notificação interna.',
'sp-int-5-time':'Tempo estimado: 2–6 horas.',
'sp-int-6-title':'Reservas / Marketplaces — Hostaway / Dokan',
'sp-int-6-desc':'Integrações via API para motores de reserva, sincronização de inventário e fluxos multivendedor.',
'sp-int-6-case':'Caso típico: sincronizar disponibilidade e receber reservas no CMS/ERP.',
'sp-int-6-time':'Tempo estimado: 4–16 horas.',
'sp-int-7-title':'ERP / Sincronização de inventário',
'sp-int-7-desc':'Conexão com ERPs e sincronização bidirecional para estoque, pedidos e faturamento.',
'sp-int-7-case':'Caso típico: sincronizar estoque e estado de pedidos entre WooCommerce e ERP.',
'sp-int-7-time':'Tempo estimado: 8–40 horas.',
'sp-int-cta-title':'Precisa de ajuda com uma integração?',
'sp-int-cta-desc':'Solicite uma avaliação rápida e eu proponho a melhor arquitetura e orçamento estimado.',
'sp-int-cta-email':'Escreva-me',
'sp-int-cta-wa':'WhatsApp',
      //Support-Security
      'ss-title':'Problemas de segurança e vulnerabilidades',
'ss-sub':'Descrição de incidentes recentes, indicadores de comprometimento e passos práticos para mitigar e recuperar um site WordPress.',
'ss-list-title':'Tópicos e casos relevantes',
'ss-list-sub':'Vetores e ataques que tiveram impacto recentemente e como tratá-los.',
'ss-1-title':'Backdoors JavaScript e reinfecções',
'ss-1-desc':'Campanhas que injetam JavaScript malicioso e backdoors persistentes que reescrevem arquivos e reinfectam após limpezas parciais.',
'ss-1-evidence':'Indicador: scripts externos desconhecidos, arquivos .js modificados ou mu-plugins e redirects inesperados.',
'ss-1-mitigation':'Mitigação: scanner profundo (Sucuri/Wordfence), auditar mu-plugins, comparar hashes, restaurar backup limpo e rotacionar credenciais.',
'ss-1-time':'Tempo estimado: 4–40 horas.',
'ss-2-title':'Abuso do diretório mu-plugins',
'ss-2-desc':'Ataquantes usam mu-plugins para esconder código malicioso que auto-executa.',
'ss-2-evidence':'Indicador: novos arquivos PHP com timestamps recentes em wp-content/mu-plugins.',
'ss-2-mitigation':'Mitigação: auditar mu-plugins, remover arquivos não autorizados e aplicar WAF.',
'ss-3-title':'Vulnerabilidades críticas em plugins (CVE)',
'ss-3-desc':'Plugins sem patch permitem injeção de backdoors ou execução remota.',
'ss-3-evidence':'Indicador: versões antigas de plugins com avisos públicos ou CVE.',
'ss-3-mitigation':'Mitigação: atualizar, seguir feeds de segurança e testar em staging.',
'ss-4-title':'Redirecionamentos maliciosos via backdoor',
'ss-4-desc':'Código injetado que atua como backdoor e dispara redirecionamentos seletivos; muitas vezes se camufla como funcionalidade legítima (ex.: notificaciones de enlaces).',
'ss-4-evidence':'Indicadores: redirecionamentos intermitentes, dominios de scripts não reconhecidos, entradas estranhas no DB.',
'ss-4-mitigation':'Mitigação: revisar arquivos e DB, remover backdoors, restaurar backups e adicionar regras WAF.',
'ss-4-time':'Tempo estimado: 4–24 horas.',
'ss-5-title':'Abuso XML-RPC / Pingback',
'ss-5-desc':'XML-RPC/pingback pode ser abusado para DDoS/reflexão ou exfiltração limitada se exposto.',
'ss-5-evidence':'Indicador: tráfego incomum para /xmlrpc.php ou picos de requisições.',
'ss-5-mitigation':'Mitigação: desativar XML-RPC se não usar, limitar acessos e aplicar WAF.',
'ss-6-title':'Credenciais comprometidas e admins fantasmas',
'ss-6-desc':'Senhas fracas ou vazadas permitem criação de administradores não autorizados.',
'ss-6-evidence':'Indicador: usuários admin desconhecidos ou sessões de IPs estranhos.',
'ss-6-mitigation':'Mitigação: remover usuários não autorizados, forçar troca de senhas e ativar 2FA.',
'ss-7-title':'Supply chain: plugins/themes abandonados',
'ss-7-desc':'Plugins sem manutenção aumentam superfície de ataque.',
'ss-7-evidence':'Indicador: plugins sem atualizações por meses ou dependências com CVE.',
'ss-7-mitigation':'Mitigação: auditar, substituir e reduzir plugins ativos.',
'ss-cta-title':'Precisa de análise de segurança?',
'ss-cta-desc':'Ofereço diagnóstico, limpeza, hardening e monitoramento. Revisão inicial de 30 minutos disponível.',
'ss-cta-email':'Escreva-me',
'ss-cta-wa':'WhatsApp',
        //SEO-Audit
        'seo-title':'Posicionamento SEO profissional',
'seo-sub':'Otimizarei seu WordPress para aumentar visibilidade orgânica, melhorar Core Web Vitals e converter tráfego em clientes.',
'seo-feat-1':'SEO técnico (estrutura, velocidade e Core Web Vitals)',
'seo-feat-2':'Estratégia de conteúdo e palavras-chave',
'seo-feat-3':'Auditoria de backlinks e otimização on-page',
'seo-btn-service':'Ver serviço',
'seo-btn-quick':'Verificação SEO rápida',
        //Portfolio
       'pf-seo-content-title': 'Conteúdo SEO para blog — Club de Inversores',
'pf-seo-content-desc': 'Planejamento editorial, clusterização por intenção e otimização on-page para aumentar tráfego orgânico.',
'pf-seo-content-feat-1': 'Estratégia de palavras-chave e mapeamento de temas',
'pf-seo-content-feat-2': 'Calendário editorial e briefs para redatores',
'pf-seo-content-feat-3': 'Otimização on-page e rich snippets',
'pf-seo-content-results': 'Resultados: +200 cliques/dia em 6 meses (dados fornecidos pelo autor).',
'pf-seo-tech-title': 'SEO técnico — Nomlogo',
'pf-seo-tech-desc': 'Auditorias técnicas, melhorias de indexação, otimização de Core Web Vitals e correções em WordPress.',
'pf-seo-tech-feat-1': 'Auditoria de rastreabilidade e estrutura de URLs',
'pf-seo-tech-feat-2': 'Otimização de CSS/JS crítico e assets',
'pf-seo-tech-feat-3': 'Implementação de schema e metadados',
'pf-web-design-title': 'Design web & conversões — Villas Zamná',
'pf-web-design-desc': 'Design orientado a reservas: integração com Hostaway, motor de reservas injetado e experiência multilíngue.',
'pf-web-design-feat-1': 'Integração Hostaway via API e motor de reservas',
'pf-web-design-feat-2': 'Child-theme Divi com CSS otimizado',
'pf-web-design-feat-3': 'Popup personalizado e melhorias UX para aumentar conversões',
'pf-cta-ver-case': 'Ver case',
'pf-cta-download-case': 'Baixar case (PDF)',
'pf-cta-request-demo': 'Solicitar demo',
'pf-cta-contact': 'Solicitar orçamento',
    }
  };

  function setLang(lang){
    const map = i18n[lang] || i18n['es'];

    // Text nodes
    document.querySelectorAll('[data-i18n]').forEach(el=>{
      const key = el.getAttribute('data-i18n');
      if(map[key]) el.textContent = map[key];
    });

    // Update image alt attributes
    document.querySelectorAll('[data-i18n-alt]').forEach(img => {
      const key = img.getAttribute('data-i18n-alt');
      if (map[key]) img.alt = map[key];
    });

    // Update aria-label attributes
    document.querySelectorAll('[data-i18n-aria]').forEach(el => {
      const key = el.getAttribute('data-i18n-aria');
      if (map[key]) el.setAttribute('aria-label', map[key]);
    });

    // Set html lang attribute for accessibility / SEO
    document.documentElement.lang = lang;

    // persist preference
    try{ localStorage.setItem('site-lang', lang); }catch(e){ /* ignore */ }
  }

  // Language buttons
  document.querySelectorAll('.lang-btn').forEach(b=>{
    b.addEventListener('click', ()=> setLang(b.getAttribute('data-lang')));
  });

  // Detect preferred language (URL ?lang= override -> localStorage -> navigator.languages -> default 'es')
  async function detectPreferredLang() {
    const urlLang = new URLSearchParams(location.search).get('lang');
    if (urlLang && ['es','en','pt'].includes(urlLang)) return urlLang;

    try {
      const stored = localStorage.getItem('site-lang');
      if (stored && ['es','en','pt'].includes(stored)) return stored;
    } catch(e){ /* ignore */ }

    const nav = navigator.languages || [navigator.language || navigator.userLanguage || 'es'];
    for (let entry of nav) {
      if (!entry) continue;
      const code = entry.toLowerCase().split('-')[0];
      if (['es','en','pt'].includes(code)) return code;
    }
    return 'es';
  }

  // Initialize language asynchronously
  (async function initLanguage() {
    const lang = await detectPreferredLang();
    setLang(lang);
  })();

  // IntersectionObserver for scroll animations
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting) e.target.classList.add('inview');
    });
  },{threshold:0.12});
  document.querySelectorAll('.animate').forEach(el=>io.observe(el));

  // Simple carousel control
  const track = document.getElementById('carouselTrack');
  if(track){
    let idx = 0;
    const items = track.querySelectorAll('.carousel-item');
    const prev = document.querySelector('.carousel-btn.prev');
    const next = document.querySelector('.carousel-btn.next');

    function show(i){
      idx = (i + items.length) % items.length;
      const item = items[idx];
      const offset = item.offsetLeft - 12;
      track.scrollTo({left: offset, behavior:'smooth'});
    }
    prev && prev.addEventListener('click', ()=> show(idx-1));
    next && next.addEventListener('click', ()=> show(idx+1));
    let timer = setInterval(()=> show(idx+1), 4500);
    track.addEventListener('mouseenter', ()=> clearInterval(timer));
    track.addEventListener('mouseleave', ()=> timer = setInterval(()=> show(idx+1), 4500));
  }

})();
